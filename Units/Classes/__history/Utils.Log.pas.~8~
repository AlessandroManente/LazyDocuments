unit Utils.Log;

interface

uses
  System.SysUtils,
  System.Classes,
  System.SyncObjs;

type
  ILogger = interface
    ['{81D5A5ED-8A52-48DC-A542-D61BDBE0B6E9}']
  end;

function Logger: ILogger;

implementation

type
  TLogger = class(TInterfacedObject, ILogger)
  public
    procedure AddLog(Log: String);
  end;

{ TLogger }

procedure TLogger.AddLog(Log: String);
begin

end;

{ Global Function }

var
  LockLogger: TCriticalSection;
  _DatabaseManager: IDatabaseManager;

function DatabaseManager: IDatabaseManager;
begin
  LockDatabaseManager.Acquire;
  try
    if not Assigned(_DatabaseManager) then
      _DatabaseManager := TDatabaseManager.Create;
    Result := _DatabaseManager;
  finally
    LockDatabaseManager.Release;
  end;
end;

initialization

LockDatabaseManager := TCriticalSection.Create;

finalization

LockDatabaseManager.Free;

end.
